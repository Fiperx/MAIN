-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera

-- Player and Character Setup
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- Variables
local Ball
local ControllingBall = false
local BallMoving = true
local Speed = 70

-- Create UI Elements
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ControlBallUI"
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Control Button
local ControlButton = Instance.new("TextButton")
ControlButton.Size = UDim2.new(0.15, 0, 0.08, 0)
ControlButton.Position = UDim2.new(0.1, 0, 0.1, 0)
ControlButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
ControlButton.Text = "CONTROL"
ControlButton.TextScaled = true
ControlButton.Parent = ScreenGui

-- Stop Button
local StopButton = Instance.new("TextButton")
StopButton.Size = UDim2.new(0.15, 0, 0.08, 0)
StopButton.Position = UDim2.new(0.75, 0, 0.1, 0)
StopButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
StopButton.Text = "STOP"
StopButton.TextScaled = true
StopButton.Visible = false
StopButton.Parent = ScreenGui

-- Speed Adjustment UI
local SpeedFrame = Instance.new("Frame")
SpeedFrame.Size = UDim2.new(0.3, 0, 0.12, 0)
SpeedFrame.Position = UDim2.new(0.35, 0, 0.6, 0)
SpeedFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
SpeedFrame.Visible = false
SpeedFrame.Parent = ScreenGui

local SpeedLabel = Instance.new("TextLabel")
SpeedLabel.Size = UDim2.new(1, 0, 0.3, 0)
SpeedLabel.BackgroundTransparency = 1
SpeedLabel.Text = "Speed: " .. Speed
SpeedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedLabel.TextScaled = true
SpeedLabel.Parent = SpeedFrame

-- Ball Finder Function
local function FindBall()
    return workspace:FindFirstChild("Football")
end

-- Ball Controller Function
local function ControlBall()
    Ball = FindBall()
    if not Ball then
        warn("No Ball Found!")
        return
    end

    ControllingBall = not ControllingBall
    BallMoving = true

    -- Set Camera Subject
    Camera.CameraSubject = ControllingBall and Ball or Character

    -- Show UI Elements
    StopButton.Visible = ControllingBall
    SpeedFrame.Visible = ControllingBall
    StopButton.BackgroundColor3 = BallMoving and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)

    -- Apply Velocity to Ball
    if ControllingBall then
        local BodyVelocity = Instance.new("BodyVelocity")
        BodyVelocity.MaxForce = Vector3.new(1000000, 1000000, 1000000)
        BodyVelocity.Parent = Ball

        RunService.Heartbeat:Connect(function()
            if not ControllingBall or not Ball or not Ball.Parent then
                BodyVelocity:Destroy()
                return
            end
            BodyVelocity.Velocity = BallMoving and (Camera.CFrame.LookVector * Speed) or Vector3.new(0, 0, 0)
        end)
    end
end

-- Stop Ball Function
local function StopBall()
    BallMoving = not BallMoving
    StopButton.BackgroundColor3 = BallMoving and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
end

-- Keybinds
UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.KeyCode == Enum.KeyCode.G then
        ControlBall()
    elseif input.KeyCode == Enum.KeyCode.F then
        StopBall()
    elseif input.KeyCode == Enum.KeyCode.Z then
        Speed = math.max(Speed - 10, 10)
        SpeedLabel.Text = "Speed: " .. Speed
    elseif input.KeyCode == Enum.KeyCode.X then
        Speed = math.min(Speed + 10, 350)
        SpeedLabel.Text = "Speed: " .. Speed
    end
end)

-- Button Click Listeners
ControlButton.MouseButton1Click:Connect(ControlBall)
StopButton.MouseButton1Click:Connect(StopBall)
